CREATE DATABASE IF NOT EXISTS `fichaje`;
USE `fichaje`;

DROP TABLE IF EXISTS `empleados`;
CREATE TABLE `empleados` (
  `idEmpleado` int NOT NULL AUTO_INCREMENT,
  `nombre` varchar(50) NOT NULL,
  `apellidos` varchar(100) NOT NULL,
  `salario` float NOT NULL DEFAULT '900',
  `email` varchar(100) DEFAULT NULL,
  `codigo` int NOT NULL,
  PRIMARY KEY (`idEmpleado`),
  UNIQUE KEY `codigo` (`codigo`)
);

DROP TABLE IF EXISTS `fichajes`;
CREATE TABLE `fichajes` (
  `id` int NOT NULL AUTO_INCREMENT,
  `fecha_entrada` datetime NOT NULL,
  `fecha_salida` datetime DEFAULT NULL,
  `codigo` int NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_fichajes_empleados` (`codigo`),
  CONSTRAINT `fk_fichajes_empleados` FOREIGN KEY (`codigo`) REFERENCES `empleados` (`codigo`) ON DELETE CASCADE ON UPDATE CASCADE
);
